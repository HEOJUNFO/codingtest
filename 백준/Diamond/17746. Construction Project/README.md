# [Diamond IV] Construction Project - 17746 

[문제 링크](https://www.acmicpc.net/problem/17746) 

### 성능 요약

메모리: 94124 KB, 시간: 1204 ms

### 분류

자료 구조, 그래프 이론, 최소 스패닝 트리, 세그먼트 트리, 스위핑

### 제출 일자

2025년 2월 13일 09:35:40

### 문제 설명

<p>IOI 国では交通網の一斉整備を行うことになった．IOI 国は xy 座標平面として表され，その上に N 個の 町がある．i 番目 (1 ≤ i ≤ N) の町は点 (X<sub>i</sub>, Y<sub>i</sub>) として表される．交通網の整備は次の手順で行われる．</p>

<ul>
	<li>N 個の町のうちいくつかの町に国際空港を建設する．少なくとも 1 つは国際空港を建設する必要が ある．国際空港は 1 つ建設するごとに決まったコストがかかる．</li>
	<li>町どうしを結ぶ道路をいくつか敷設する．道路は町を表す点どうしを直接結ぶ x 軸か y 軸に平行な線 分であり，道路は 1 本敷設するごとにその長さと同じぶんのコストがかかる．</li>
</ul>

<p>このとき，次の条件が満たされていなければならない．</p>

<ul>
	<li>IOI 国には地盤の状態が悪いなどの理由で道路を敷設できない領域が M 個ある．各領域は長方形で 表され，j 番目 (1 ≤ j ≤ M) の長方形の左下の点は (P<sub>j</sub>, Q<sub>j</sub>) であり右上の点は (R<sub>j</sub>, S<sub>j</sub>) である (すなわ ち P<sub>j</sub> < R<sub>j</sub> かつ Q<sub>j</sub> < S<sub>j</sub> である)．どの道路も，M 個の領域のうちいずれのものとも共通部分をもっ てはいけない．領域は周上も含むものとし，領域を表す長方形の周と共通部分を持つような道路も存 在してはいけない．</li>
	<li>N 個のどの町からも，道路を辿って別の町へ行くことを繰り返して国際空港のある町へ辿りつける 必要がある．</li>
</ul>

<p>この事業の発注先として建設会社 C 社が候補に挙がっている．k 番目 (1 ≤ k ≤ C) の建設会社は国際空港 を 1 つ建設するのにコスト B<sub>k</sub> がかかり，最大で H<sub>k</sub> 個までの国際空港を建設できる (道路の建設にかかる コストは建設会社によらず，また道路の本数や長さに制限はない)．それぞれの建設会社に対して，その建 設会社が上の条件を満たすように交通網の整備を行うときにかかるコストの合計値の最小値を求めたい．</p>

<p>建設できる国際空港の個数が小さいために，条件を満たすような交通網の整備を行えない建設会社があ るかもしれない．その場合はコストの合計値ではなく，条件を満たせないということを報告してほしい．</p>

<p>IOI 国の町の数を表す整数 N と町の座標，道路を敷設できない領域の数を表す整数 M とそれぞれの領域 を表す座標，発注先候補の建設会社の数を表す整数 C とそれぞれの建設会社の情報が与えられたとき，そ れぞれの建設会社に対して問題文中で述べられた条件を満たすように交通網の整備を行うときにかかるコ ストの合計値の最小値を求めるプログラムを作成せよ．</p>

### 입력 

 <p>標準入力から以下の入力を読み込め．</p>

<ul>
	<li>1 行目には 3 つの整数 N, M, C が空白を区切りとして書かれており，それぞれ IOI 国にある町の個数， 道路を敷設できない領域の個数，事業の発注先候補の建設会社の個数を表す．</li>
	<li>続く N 行のうちの i 行目 (1 ≤ i ≤ N) には 2 つの整数 X<sub>i</sub>, Y<sub>i</sub> が空白を区切りとして書かれており，i 番 目の町の座標が (X<sub>i</sub>, Y<sub>i</sub>) であることを表す．</li>
	<li>続く M 行のうちの j 行目 (1 ≤ j ≤ M) には 4 つの整数 P<sub>j</sub>, Q<sub>j</sub>, R<sub>j</sub>, S<sub>j</sub> が空白を区切りとして書かれて おり，j 番目の道路を敷設できない領域を表す長方形の左下の点の座標が (P<sub>j</sub>, Q<sub>j</sub>) であり右上の点の 座標が (R<sub>j</sub>, S<sub>j</sub>) であることを表す．</li>
	<li>続く C 行のうちの k 行目 (1 ≤ k ≤ C) には 2 つの整数 B<sub>k</sub>, H<sub>k</sub> が空白を区切りとして書かれており，k 番目の発注先候補の建設会社が国際空港を 1 つ建設するのに B<sub>k</sub> のコストがかかり，最大で H<sub>k</sub> 個ま での国際空港を建設できることを表す．</li>
</ul>

### 출력 

 <p>標準出力に C 行出力せよ．k 行目 (1 ≤ k ≤ C) には，k 番目の発注先候補の建設会社がこの事業を行うと したときにかかるコストの合計値の最小値を表す 1 つの整数を出力せよ．ただし，k 番目の発注先候補の 建設会社が条件を満たすように事業を行えない場合はかわりに整数 −1 を出力せよ．</p>

